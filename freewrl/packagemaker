#! /bin/sh


#make the VERSION lower case; make sure there are no arithmetic operators here...
VERSION="freewrl-1.19.2"

# make distribution directory, and copy all needed files over.
# Assume you are in root of FreeWRL directory.

rm -r ../$VERSION
mkdir ../$VERSION
cp -r . ../$VERSION

# go to the package directory.

cd ../$VERSION

# 
# now, trim off any fat you see

find . -name typescript -exec rm {} \;
find . -name CVS -exec rm -r {} \;
find . -name "*.class" -exec rm -r {} \;
find . -name "*.jar" -exec rm -r {} \;

# remove empty directories.
find . -type d -empty -exec rmdir {} \;

rm package*
rm Viewer.pm
rm Quaternion.pm
rm VRMLServ.pm
rm lastcvscheckin
rm -r OpenGL/
rm -r x3d/
rm -r FreeWRL_Message/
rm -r Text/
rm -r JS/js
rm -r JS/js1.5/Linux_All_DBG.OBJ
rm -r Plugin/mozilla
rm -r nodes/
rm -r speed/
rm -r talk/
rm -r seqs/
rm -r avt/
rm -r bt/
rm -r jt/
rm -r pt/
rm -r perl-scripts/
rm freewrl

# cleanup Plugin directory

rm -r Plugin/CFuncs/
rm -r Plugin/mozilla/
rm -r Plugin/common/
rm -r Plugin/include/
rm -r Plugin/Source/
rm -r Plugin/Unix/

# remove some of the tests
rm -r tests/H-Anim

# make the tar file
echo $VERSION.tar > sourcepackage

cd ..
tar -cf $VERSION.tar $VERSION
rm $VERSION.tar.gz
gzip $VERSION.tar

echo "Done"
