<HTML>
<HEAD>
<META NAME="Generator" CONTENT="WordPerfect 9">
<TITLE></TITLE>
</HEAD>
<P>&#35;Copyright (C) 1998 Tuomas J. Lukka, 2001, 2002 John Stewart, CRC Canada.  
<BR>&#35;DISTRIBUTED WITH NO WARRANTY, EXPRESS OR IMPLIED.
<BR>&#35;See the GNU Library General Public License (file COPYING in the distribution)
<BR>&#35;for conditions of use and redistribution, EXCEPT on the files  
<BR>&#35;which belong under the mozilla public license. 

<BODY TEXT="#000000" LINK="#0000ff" VLINK="#551a8b" ALINK="#ff0000" BGCOLOR="#c0c0c0">

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica"></SPAN><SPAN STYLE="font-family: Helvetica">Macintosh Installation Instructions</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">The following instructions are for buidling FreeWRL as a standalone executable running under XDarwin on Mac OS X. 
The release of Mac OS X used was Mac OS X v 10.2.3.  The instructions assume that you are starting with a freshly
installed Mac OS system, and all supporting packages required are listed and referenced.  You may already have some
of these packages installed on your system.  If so, you may be able to skip some or all of the first six steps.</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Step 1.  Download and install the developer tools for Mac OS X 
from connect.apple.com.  This pacakge is self installing.</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Step 2.  Download and install the XonX XFree86 package from www.sourceforge.org.  This package is self installing. 
This package allows you to run Xwindows in rootless mode on your system, and supports X extensions required by
FreeWRL. </SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Step 3. Download and install the ImageMagick package from www.entropy.ch/software/macosx/.  The package available
from this location is self-installing and requires no tweaking to install on Darwin.</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Step 4. Download and install the libjpeg package from www.freshmeat.net.  This package looks for a man directory as
specified in the Makefile.  Edit the makefile to point to a valid directory on your system before running make.   Change
into the directory and </SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">./configure</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">make</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">make install</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Step 5. Download and install the zlib and libpng packages from www.sourceforge.org.  Rename the source directories to
simply "zlib" and "libpng" and make sure that they are in the same subdirectory.  Install the zlib package first, then the
libpng package.  Change into the zlib directory and</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">./configure</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">make</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">make install</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Then change into the libpng directory and</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">cp scripts/makefile.macosx makefile</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">make</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">make install</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Step 6. Download and install Freetype2 from freetype.sourceforge.org.  You will need to move
/usr/local/include/freetype2/freetype to /usr/local/include/freetype after installation.  Change into the freetype directory
and</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">./configure</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">make</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">make install</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">cp -r /usr/local/include/freetype2/freetype /usr/local/include/freetype</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">rm -r /usr/local/include/freetype2/freetype</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Step 7. Install the perl modules available from the www.crc.ca/FreeWRL website.</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Digest-MD5-2.09</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">HTML-Parser-2.25</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">MIME-Base64-2.11</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">URI-1.04</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">libnet-1.0607</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">libwww-perl-5.47</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">Image-Base-1.07</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">To install each of these modules, untar them, go into their directories, and</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">perl Makefile.PL</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">make</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">make test (if applicable)</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">make install</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Note that libwww-perl may ask you if you want to reconfigure.  I always just select the default.</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Step 8.  Download the FreeWRL source code.  Now to the actual installation of FreeWRL!</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Step 9.  Rename the file vrml.conf.macosx to vrml.conf.  Check that the directories for the libaries in this file are
correct.  If you followed the instructions above, they should be, with the exception of the JPEG libraries and includes
which will have to point to the directory in which you installed the jpeg-6b package.</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Step 10.  A couple of the FreeWRL filenames seem to be too long for the Mac system to pick up properly for some
reason.  You should rename them so that they have the appropriate names.</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">mv  java/classes/vrml/external/FreeWRLEAI/UnsupportedFieldTypeException.c
java/classes/vrml/external/FreeWRLEAI/UnsupportedFieldTypeException.class</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">mv java/classes/vrml/external/FreeWRLEAI/UnsupportedFieldTypeException.j</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">java/classes/vrml/external/FreeWRLEAI/UnsupportedFieldTypeException.java</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Step 11.  Modify your vrml.conf file to point to the correct Javascript library.  </SPAN></P>


<p><SPAN STYLE="font-family: Helvetica">In the vrml.conf file your JS_LIBS and JS_INC variables must be modified to point to the directories for the version of Darwin installed on your machine.  The include directory -Ijs/src/Darwin5.2.2_OPT.OBJ and the library directory -Ljs/src/Darwin5.2.2_OPT.OBJ must be modified to js/src/Darwin*_OPT.OBJ, where * is the version of Darwin installed on your machine.  You can check which version of Darwin you are running by entering "uname -a" at the command prompt.  Note that you may also need to add a mk file for your version of Darwin to the JS/js/src/config directory if one does not exist.  If a .mk file is not listed for your version of Darwin in the JS/js/src/config directory you can create one by copying one of the other Darwin mk files to a new file with the appropriate version name.  For example, if your version of Darwin is 5.2.2 and no Darwin5.2.2.mk file is listed in the JS/js/src/config directory, you will have to create one by issuing the command "cp Darwin.mk Darwin5.2.2.mk" in the JS/js/src/config directory. Any of the Darwin mk files may be copied to create the mk file for your system, with the following caveat:  Mac OS X Jaguar installations (Darwin 6.0 and beyond) must copy a mk file for Darwin6.0 or greater; Mac OS X 10.1 installations must copy a mk file for a Darwin version earlier than 6.0</span> 


<BR WP="BR1"><BR WP="BR2">
<p><SPAN STYLE="font-family: Helvetica">Step 12. Modify the sv.h perl header file</span>

<p><SPAN STYLE="font-family: Helvetica">There is a problem with one of the perl header files which stops the FreeWRL installation process.  In order to fix this problem you must comment out one of the lines in /System/Library/Perl/darwin/CORE/sv.h.  Line 356:  DIR * xio_dirp; /* for opendir, readdir, etc */ must be commented out.  You can do this by inserting two forward slash characters (//) at the start of this line.  Once you have done this the line 356 will read:</span> 
<p><SPAN STYLE="font-family: Helvetica">// DIR * xio_dirp; /* for opendir, readdir, etc */
<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Step 13.  Make the Makefile</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">perl Makefile.PL</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Step 14. run ranlib on /usr/local/lib/libpng.a</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">ranlib /usr/local/lib/libpng.a</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">Step 15. Build and install FreeWRL</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">make</SPAN></P>

<P><SPAN STYLE="font-family: Helvetica">make install</SPAN></P>

<BR WP="BR1"><BR WP="BR2">
<P><SPAN STYLE="font-family: Helvetica">You should now be able to successfully run all of the tests in the tests directory from an X command prompt. 
<BR WP="BR1"><BR WP="BR2">
<BR WP="BR1"><BR WP="BR2">
</BODY>
</HTML>
