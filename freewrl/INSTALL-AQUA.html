<HTML>
<HEAD>
<TITLE></TITLE>
</HEAD>

<P><B>Macintosh Installation Instructions</B></P>

To install FreeWRL on OS X  is pretty simple. 
<ul>
<p><li>Down load the "dmg" file, eg, from http://freewrl.sourceforge.net/download.html
<p><li>Double Click the dmg icon.
<p><li>follow the up to date "README" in the dmg package.
</ul>
<p>
<BR ><BR >
<b>--- Text below is only for those crazy loonies (like the developers) who want to compile the code from source ---</b>
<P>
The following instructions are for compiling the FreeWRL rendering engine for use with the FreeWRL Aqua GUI for Mac OSX.
The releases of Mac OS X used were Mac OS X v 10.3.8, with updates current to April 8, 2005, and 10.4.2, with updates
current to October 12, 2005.
<p>  
The instructions assume that you are starting with a freshly
installed Mac OS system, <B>with an installed FreeWRL package,</b>
and all supporting packages required are listed and referenced.  You may already have some
of these packages installed on your system.  If so, you may be able to skip some steps.</P>
<p>


<P><B>NOTE 1: </B>You need to do this ONLY if you wish to change the source code. The "dmg" OS X
install installs a functioning system.
<P><B>NOTE 2: </B>
This package compiles the FreeWRL library, which contains 99.9% of the FreeWRL code. The Cocoa
and Carbon interface files are not here; please ask us for these files if you wish. The Cocoa
and Carbon interfaces mimic the commands found in the CFrontEnd source code files, but with
windowing commands suitable for OS X, instead of X-11.
<P><B>NOTE 2: </B>OSX 10.4 (Tiger) builds - follow these instructions. The line numbers for include
file edits are generally very close; IIRC, they were within a line or two of the 10.3 file locations; the file paths
are the same as OSX 10.3, with the exception of the Perl directories; edit files in ../Perl/5.8.6/.. rather than 5.8.1
for 10.3.
<p>
<OL>
<P>
<LI>
(if required) enable root password - via finder start Applications/NetInfo manager.
From the "Security" pull down menu, first authenticate, then enable root, and give root a password.
<P>
<LI>
Install Xcode-1.2 package from Apple disc.  This has has cvs, etc.
<P>
<LI>
Install all software updates from Apple via the "software update" function of OS X.
<P>
<LI>
Download and install the ImageMagick package from www.entropy.ch/software/macosx/.  The package available
from this location is self-installing and requires no tweaking to install on Darwin.</P>
<P>
<LI>
Download and install the FreeWRL for Aqua package from Sourceforge.  This package will install the latest functional version of FreeWRL for Aqua on your system.  It will also install all needed perl modules and OSX frameworks.  This package is self-installing.  Double-click to begin the install process and indicate that FreeWRL should be installed on your primary hard drive.  (If you have a partitioned drive, or multiple drives, you must install FreeWRL on the same partition as that which contains the /Library/Frameworks directory).
<P>
<LI>
Download the FreeWRL source code. 
You can download via "cvs", or just download the latest source package. 
If you are installing from cvs, run the "packagemaker" script, and go to the directory that it makes. (eg, cd ../FreeWRL-1.11-pre5)
<P>
<LI>
Download expat-1.95.8.tar.gz from 
http://sf.net/projects/expat. 
<UL>
<LI>	Untar (eg, gunzip expat-1.95.8.tar.gz)
<LI>cd into it  (eg,  cd expat-1.95.8)
<LI>./configure 
<LI>make install
<LI>cd ..
</UL>
<P>
<LI>
Download XML-Parser-2.31.tar.gz from 
http://www.cpan.org/modules/01modules.index.html.
<UL>
<LI>Untar
<LI>cd into it
<LI>perl Makefile.PL
<LI>make install
<LI>cd ..
</UL>
<P>
<LI>
For the builds following, make the symbolic link:
<UL>
<LI>	cd /usr
<LI>	ln -s /usr/share/man
<LI>	cd -
</UL>
You can remove this link after successful compiling if you want.

<P>
<LI>
Download libjpeg from
http://www.ijg.org/files/jpegsrc.v6b.tar.gz
<UL>
<LI>	Untar
<LI> cd into it
<LI>	./configure --prefix="/usr" --mandir="/usr/share"
<LI>	make install
<LI>	make install-lib
<LI>    cd ..
</UL>

<P>
<LI>
Download zlib There is already a zlib there, but we need some more files.
http://www.gzip.org/zlib/zlib-1.2.2.tar.gz;
<UL>
<LI>untar 
<LI>rename zlib-1.2.2 to zlib
<LI>cd zlib
<LI>	./configure --prefix="/usr"
<LI>	make install
<LI>    cd ..
</UL>
<P>
<LI>
Download libpng.
http://sf.net/projects/libpng.
<UL>
<LI>untar
<LI> move to libpng (same as zlib);
<LI>	./configure --prefix="/usr"
<LI>	make install
<LI>    cd ..
</UL>
<P>
<LI>
Download freetype2.
http://sf.net/projects/freetype.
<UL>
<LI> untar
<LI> cd into it
<LI>	./configure --prefix="/usr"
<LI>	make install
<LI>    cd ..
</UL>
<P>
<LI>
In the FreeWRL source directory: perl Makefile.PL - note, the end has "warnings":
<UL>

<LI>Unrecognized argument in LIBS ignored: '-F/System/Library/Frameworks'
<LI>Unrecognized argument in LIBS ignored: '-framework'
<LI>Unrecognized argument in LIBS ignored: 'OpenGL'
<LI>Unrecognized argument in LIBS ignored: '-framework'
<LI>Unrecognized argument in LIBS ignored: 'GLUT'
<LI>Unrecognized argument in LIBS ignored: '-framework'
<LI>Unrecognized argument in LIBS ignored: 'Cocoa'

</UL>
<p>
And, the top will have some warnings about not finding some executables; these
are for Unix (non apple) machines only, and can be ignored.
<P>
<LI>
edit /System/Library/Perl/5.8.1/darwin-thread-multi-2level/CORE/sv.h.
on line 387 (OSX 10.4: Perl 5.8.6, line 388), comment out the 
<UL>
	DIR *    xiou_dirp;   /* for opendir, readdir, etc */
line.

</UL>

<P>
<LI>
edit /System/Library/Perl/5.8.1/darwin-thread-multi-2level/CORE/reentr.h 
(OSX 10.4: Perl 5.8.6; line numbers 720, 723);

<UL>
<LI>On line 716, comment out the
	struct tm _gmtime_struct;
<LI>and on line 719, comment out the:
	struct tm _localtime_struct;
line.

</UL>
<P>
<LI>
edit /usr/include/dirent.h
<UL>
<LI>On line 113 (OSX 10.4 line 114), comment out the line:
	struct dirent *readdir(DIR *);
<LI>NOTE: you may have to change the permissions on this file in order to write it.

</UL>

<P>
<LI>
edit /System/Library/Perl/5.8.1/darwin-thread-multi-2level/CORE/proto.h line 915 (OSX 10.4; perl 5.8.6, line 916)
<UL>
comment out line 915: 
	PERL_CALLCONV DIR*        Perl_dirp_dup(pTHX_ DIR* dp);

</UL>

<P>
<LI>
ranlib /usr/lib/libjpeg.a

<P>
<LI>
The Cocoa frontend needs this path update:
<UL>
<LI>	cd /usr/local/lib
<LI>	ln -s /usr/lib/AquaIntLib.dylib
<LI>	cd -

</UL>
<P>
<LI>
In the FreeWRL Source directory, 
<UL>
<LI>make install
</UL>
 to make the new OSX FreeWRL backend.
</OL>
</BODY>
</HTML>
