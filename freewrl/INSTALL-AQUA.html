<HTML>
<HEAD>
<TITLE></TITLE>
</HEAD>
<P>&#35;Copyright (C) 1998 Tuomas J. Lukka, 2001, 2002, 2005 John Stewart, CRC Canada.
<BR>&#35;DISTRIBUTED WITH NO WARRANTY, EXPRESS OR IMPLIED.
<BR>&#35;See the GNU Library General Public License (file COPYING in the distribution)
<BR>&#35;for conditions of use and redistribution, EXCEPT on the files
<BR>&#35;which belong under the mozilla public license.

<BODY TEXT="#000000" LINK="#0000ff" VLINK="#551a8b" ALINK="#ff0000" BGCOLOR="#c0c0c0">

<BR ><BR >
<P><B>Macintosh Aqua Installation Instructions</B></P>

<P>
The following instructions are for compiling the FreeWRL rendering engine for use with the FreeWRL Aqua GUI for Mac OSX.
The release of Mac OS X used was Mac OS X v 10.3.8, with updates current to April 8, 2005.  
The instructions assume that you are starting with a freshly
installed Mac OS system, <B>with an installed FreeWRL package,</b>
and all supporting packages required are listed and referenced.  You may already have some
of these packages installed on your system.  If so, you may be able to skip some steps.</P>


<P><B>NOTE 1: </B>You need to do this ONLY if you wish to change the source code. The "dmg" OS X
install installs a functioning system.
<P><B>NOTE 2: </B>
This package compiles the FreeWRL library, which contains 99.9% of the FreeWRL code. The Cocoa
and Carbon interface files are not here; please ask us for these files if you wish. The Cocoa
and Carbon interfaces mimic the commands found in the CFrontEnd source code files, but with
windowing commands suitable for OS X, instead of X-11.
<OL>
<P>
<LI>
Install Xcode-1.2 package from Apple disc.
	This has has cvs, etc.
<P>
<LI>
Install all software updates from Apple via the "software update" function of OS X.
<P>
<LI>
(if required) enable root password - via finder start Applications/NetInfo manager.
First authenticate, then enable root, and give root a password.

<P>
<LI>
Download and install the ImageMagick package from www.entropy.ch/software/macosx/.  The package available
from this location is self-installing and requires no tweaking to install on Darwin.</P>
<P>
<LI>
Download and install the FreeWRL for Aqua package from Sourceforge.  This package will install the latest functional version of FreeWRL for Aqua on your system.  It will also install all needed perl modules and OSX frameworks.  This package is self-installing.  Double-click to begin the install process and indicate that FreeWRL should be installed on your primary hard drive.  (If you have a partitioned drive, or multiple drives, you must install FreeWRL on the same partition as that which contains the /Library/Frameworks directory).
<P>
<LI>
Download the FreeWRL source code. 
You can download via "cvs", or just download the latest source package. 
If you are installing from cvs, run the "packagemaker" script, and go to the directory that it makes. (eg, cd ../FreeWRL-1.11-pre5)
<P>
<LI>
Download expat-1.95.8.tar.gz from 
http://sf.net/projects/expat. 
<UL>
<LI>	Untar, 
<LI>cd into it; 
<LI>./configure; 
<LI>make install
</UL>
<P>
<LI>
Download XML-Parser-2.31.tar.gz from 
http://www.cpan.org/modules/01modules.index.html.
<UL>
<LI>Untar, 
<LI>cd into it; 
<LI>perl Makefile.PL;  
<LI>make install
</UL>
<P>
<LI>
For the builds following, make the symbolic link:
<UL>
<LI>	cd /usr
<LI>	ln -s /usr/share/man
<LI>	cd -
</UL>
You can remove this link after successful compiling if you want.

<P>
<LI>
Download libjpeg from
http://www.ijg.org/files/jpegsrc.v6b.tar.gz
<UL>
<LI>	Untar, cd into it;
<LI>	./configure --prefix="/usr" --mandir="/usr/share";
<LI>	make install;
<LI>	make install-lib.
</UL>

<P>
<LI>
Download zlib There is already a zlib there, but we need some more files.
http://www.gzip.org/zlib/zlib-1.2.2.tar.gz;
<UL>
<LI>untar, rename zlib-1.2.2 to zlib;
<LI>	./configure --prefix="/usr";
<LI>	make install.
</UL>
<P>
<LI>
Download libpng.
http://sf.net/projects/libpng.
<UL>
untar, move to libpng (same as zlib);
<LI>	./configure --prefix="/usr";
<LI>	make install.
</UL>
<P>
<LI>
Download freetype2.
http://sf.net/projects/freetype.
<UL>
<LI>	./configure --prefix="/usr";
<LI>	make install.
</UL>
<P>
<LI>
In the FreeWRL source directory: perl Makefile.PL - note, the end has "warnings":
<UL>

<LI>Unrecognized argument in LIBS ignored: '-F/System/Library/Frameworks'
<LI>Unrecognized argument in LIBS ignored: '-framework'
<LI>Unrecognized argument in LIBS ignored: 'OpenGL'
<LI>Unrecognized argument in LIBS ignored: '-framework'
<LI>Unrecognized argument in LIBS ignored: 'GLUT'
<LI>Unrecognized argument in LIBS ignored: '-framework'
<LI>Unrecognized argument in LIBS ignored: 'Cocoa'

</UL>

<P>
<LI>
edit /System/Library/Perl/5.8.1/darwin-thread-multi-2level/CORE/sv.h.
on line 387, comment out the 
<UL>
	DIR *    xiou_dirp;   /* for opendir, readdir, etc */
line.

</UL>

<P>
<LI>
edit /System/Library/Perl/5.8.1/darwin-thread-multi-2level/CORE/reentr.h
<UL>
On line 716, comment out the
	struct tm _gmtime_struct;
and on line 719, comment out the:
	struct tm _localtime_struct;
line.

</UL>
<P>
<LI>
edit /usr/include/dirent.h
<UL>
On line 113, comment out the line:
	struct dirent *readdir(DIR *);
NOTE: you may have to change the permissions on this file in order to write it.

</UL>

<P>
<LI>
edit /System/Library/Perl/5.8.1/darwin-thread-multi-2level/CORE/proto.h line 915
<UL>
comment out line 915: 
	PERL_CALLCONV DIR*        Perl_dirp_dup(pTHX_ DIR* dp);

</UL>

<P>
<LI>
ranlib /usr/lib/libjpeg.a

<P>
<LI>
The Cocoa frontend needs this path update:
<UL>
	cd /usr/local/lib
	ln -s /usr/lib/AquaIntLib.dylib
	cd -

</UL>
<P>
<LI>
In the FreeWRL Source directory, 
<UL>
<LI>make install
</UL>
 to make the new OSX FreeWRL backend.
</OL>
</BODY>
</HTML>
