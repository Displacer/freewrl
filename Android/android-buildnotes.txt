Modified April 23 2012


FreeWRL (FreeX3d) - Android build notes

Quick:

0) get tool sets, helper files, etc.

	- get the Android build tools and install. (both NDK and SDK toolsets)

	- get the libxml2.tar file from:

		http://freewrl.sourceforge.net/libxml2.tar.gz

	  uncompress, untar and put it in the "freewrl" directory (the parent of the "Android" directory)




1) cd to freewrl/Android

2) get the package set up with the android tools. Issue the command:

	android update project --target 1 --name FreeWRL --path ./

3) plug your testing device in. Edit the "make-install" script, and put the device id
in. eg:

	prompt> adb devices
	List of devices attached 
	388924841bf5497	device

You may have to enable "USB Debugging" on your Android device.

4) ndk-build appears to require the exact full path to it; EDIT the make-install to put
   the full path in. You'll see the path for my system, eg:

	/Users/johns/Desktop/Android-tests-current/android_tools/android-ndk-r7/ndk-build

4) sh make-install should build, and install onto your device.

--------------------------------------------------------------------

Older notes:


Pre-Requisites:

Android NDK and SDK development environment.


ICU included from Android GIT repository - this is to satisfy headers when 
compiling libxml2.

libxml2 - Some tweaks were made to the encoder (mbstowcs / wcstombs). This will
need re-visiting at some point in the future. If you experience failures to read
xml files, that are wide character based, this is a good place to start.


Compilation:

cd to freewrl/Android
(new) issue the build-install shell script.



Android Files (freewrl/Android) :


Under jni is the master make file (Android.mk). This will build libxml2 and the freex3d 
library. Paths to libxml2 and icu will need tweaking to suit your environment. I attempted to 
make these relative but could not get the 'C' includes to resolve correctly.

libxml2 and ICU are available from the Android GIT repository.


default.properties

This files sets the platform specific headers/libraries that the NDK will use, under
($NDK)/platforms. Currently targets android-5.


under FreeWRL-Android-static are 3 helper source file and the Android config.h
The source files contain unresolved gui functions, version info, and some helpers to start 
calling the library from an Android / Java front end.


All Android specific code changes should be wrapped in #if defined(_ANDROID). The Android
make files define this directive on the compilers command line.
